parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"craX":[function(require,module,exports) {
var define;
var e;!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof e&&e.amd?e(["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).contentfulExtension={})}(this,function(e){"use strict";var t,n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=function(){function e(){this._id=0,this._listeners={}}return e.prototype.dispatch=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r in this._listeners)(e=this._listeners)[r].apply(e,t)},e.prototype.attach=function(e){var t=this;if("function"!=typeof e)throw new Error("listener function expected");var n=this._id++;return this._listeners[n]=e,function(){return delete t._listeners[n]}},e}(),i="__private__memoized__arguments__",a=function(e){function r(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=e.call(this)||this;if(o[t]=[],!n.length)throw new Error("Initial value to be memoized expected");return o[i]=n,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(r,e),r.prototype.dispatch=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this[i]=t,e.prototype.dispatch.apply(this,t)},r.prototype.attach=function(t){var n=e.prototype.attach.call(this,t);return t.apply(void 0,this[i]),n},r}(o);t=i;var s=function(){function e(e,t){var n=this;this._messageHandlers={},this._responseHandlers={},this._send=function(e,t){var n=0;return function(r,o){var i=n++;try{t.postMessage({source:e,id:i,method:r,params:o},"*")}catch(e){throw e instanceof DOMException&&"DataCloneError"===e.name&&"openDialog"===r&&console.error("Error: openCurrent[App] parameters could not be parsed. You likely tried to pass functions or DOM elements as a parameter. Tip: Use the App SDK directly within the dialog location.\n\nLearn more about the dialog location: https://ctfl.io/app-sdk-dialog"),e}return i}}(e,t.parent),t.addEventListener("message",function(e){n._handleMessage(e.data)})}return e.prototype.call=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this._send(e,n);return new Promise(function(e,n){t._responseHandlers[o]={resolve:e,reject:n}})},e.prototype.send=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._send(e,t)},e.prototype.addHandler=function(e,t){return e in this._messageHandlers||(this._messageHandlers[e]=new o),this._messageHandlers[e].attach(t)},e.prototype._handleMessage=function(e){if(e.method){var t=e.method,n=e.params,r=this._messageHandlers[t];r&&r.dispatch.apply(r,n)}else{var o=e.id,i=this._responseHandlers[o];if(!i)return;"result"in e?i.resolve(e.result):"error"in e&&i.reject(e.error),delete this._responseHandlers[o]}},e}(),l=function(){function e(e,t){var n=this;this.id=t.id,this.locale=t.locale,this.type=t.type,this.required=t.required,this.validations=t.validations,this.items=t.items,this._value=t.value,this._valueSignal=new a(this._value),this._isDisabledSignal=new a(void 0),this._schemaErrorsChangedSignal=new a(void 0),this._channel=e,e.addHandler("valueChanged",function(e,t,r){e!==n.id||t&&t!==n.locale||(n._value=r,n._valueSignal.dispatch(r))}),e.addHandler("isDisabledChangedForFieldLocale",function(e,t,r){e===n.id&&t===n.locale&&n._isDisabledSignal.dispatch(r)}),e.addHandler("schemaErrorsChangedForFieldLocale",function(e,t,r){e===n.id&&t===n.locale&&n._schemaErrorsChangedSignal.dispatch(r)})}return e.prototype.getValue=function(){return this._value},e.prototype.setValue=function(e){return this._value=e,this._valueSignal.dispatch(e),this._channel.call("setValue",this.id,this.locale,e)},e.prototype.removeValue=function(){return this._value=void 0,this._channel.call("removeValue",this.id,this.locale)},e.prototype.setInvalid=function(e){return this._channel.call("setInvalid",e,this.locale)},e.prototype.onValueChanged=function(e){return this._valueSignal.attach(e)},e.prototype.onIsDisabledChanged=function(e){return this._isDisabledSignal.attach(e)},e.prototype.onSchemaErrorsChanged=function(e){return this._schemaErrorsChangedSignal.attach(e)},e}(),u=function(){function e(e,t,n){this.id=t.id,this.locales=t.locales,this.type=t.type,this.required=t.required,this.validations=t.validations,this.items=t.items,this._defaultLocale=n,this._fieldLocales=t.locales.reduce(function(n,o){var i,a=new l(e,{id:t.id,type:t.type,required:t.required,validations:t.validations,items:t.items,locale:o,value:t.values[o]});return r(r({},n),((i={})[o]=a,i))},{}),this.assertHasLocale(n)}return e.prototype.getValue=function(e){return this._getFieldLocale(e).getValue()},e.prototype.setValue=function(e,t){return this._getFieldLocale(t).setValue(e)},e.prototype.removeValue=function(e){return this.setValue(void 0,e)},e.prototype.onValueChanged=function(e,t){var n=t||e;return t||(e=""),this._getFieldLocale(e).onValueChanged(n)},e.prototype.onIsDisabledChanged=function(e,t){var n=t||e;return t||(e=""),this._getFieldLocale(e).onIsDisabledChanged(n)},e.prototype._getFieldLocale=function(e){return e=e||this._defaultLocale,this.assertHasLocale(e),this._fieldLocales[e]},e.prototype.getForLocale=function(e){if(!e)throw new Error("getForLocale must be passed a locale");return this._getFieldLocale(e)},e.prototype.assertHasLocale=function(e){if(!this._fieldLocales[e])throw new Error('Unknown locale "'+e+'" for field "'+this.id+'"')},e}();function c(e,t){var n,r=e,o=r.document,i=r.MutationObserver,a=function(){u.updateHeight()},s=new i(a),l=!1,u={startAutoResizer:function(){u.updateHeight(),l||(l=!0,s.observe(o.body,{attributes:!0,childList:!0,subtree:!0,characterData:!0}),e.addEventListener("resize",a))},stopAutoResizer:function(){l&&(l=!1,s.disconnect(),e.removeEventListener("resize",a))},updateHeight:function(e){void 0===e&&(e=null),null===e&&(e=Math.ceil(o.documentElement.getBoundingClientRect().height)),e!==n&&(t.send("setHeight",e),n=e)}};return u}var d=["getTask","getTasks","createTask","updateTask","deleteTask"];function p(e,t,n,o){var i=t.sys,s=new a(i),l=t.metadata,u=new a(l);e.addHandler("sysChanged",function(e){i=e,s.dispatch(i)}),e.addHandler("metadataChanged",function(e){l=e,u.dispatch(l)});var c={};return d.forEach(function(t){c[t]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.call("callEntryMethod",t,n)}}),r(r(r({getSys:function(){return i},onSysChanged:function(e){return s.attach(e)},fields:n.reduce(function(e,t){return e[t.id]=o(t),e},{})},l?{metadata:l}:{}),{getMetadata:function(){return l},onMetadataChanged:function(e){return u.attach(e)}}),c)}var f=["getContentType","getEntry","getEntrySnapshots","getAsset","getEditorInterface","getPublishedEntries","getPublishedAssets","getContentTypes","getEntries","getEditorInterfaces","getAssets","createContentType","createEntry","createAsset","updateContentType","updateEntry","updateAsset","deleteContentType","deleteEntry","deleteAsset","publishEntry","publishAsset","unpublishEntry","unpublishAsset","archiveEntry","archiveAsset","unarchiveEntry","unarchiveAsset","createUpload","processAsset","waitUntilAssetProcessed","getUsers","getAllScheduledActions","getEntityScheduledActions","signRequest","createTag","readTags","updateTag","deleteTag","getTeams"];function h(e,t){var n={};return f.forEach(function(t){n[t]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.call("callSpaceMethod",t,n)}}),n.getCachedContentTypes=function(){return function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e}([],t)},n}var g=function(e){return"object"!=typeof(t=e)||null===t||Array.isArray(t)?{}:e;var t};function v(e,t){return{openAlert:n.bind(null,"alert"),openConfirm:n.bind(null,"confirm"),openPrompt:n.bind(null,"prompt"),openExtension:o,openCurrentApp:i,openCurrent:function(e){return t.app?i(e):o(r(r({},e),{id:t.extension}))},selectSingleEntry:a.bind(null,"Entry",!1),selectSingleAsset:a.bind(null,"Asset",!1),selectMultipleEntries:a.bind(null,"Entry",!0),selectMultipleAssets:a.bind(null,"Asset",!0)};function n(t,n){return e.call("openDialog",t,g(n))}function o(n){var o=g(n);if((o=r(r({},o),{id:o.id||t.extension})).id)return e.call("openDialog","extension",o);throw new Error("Extension ID not provided.")}function i(n){if(n=g(n),t.app){var o=r(r({},n),{id:t.app});return e.call("openDialog","app",o)}throw new Error("Not in the app context.")}function a(t,n,r){return(r=g(r)).entityType=t,r.multiple=n,e.call("openDialog","entitySelector",r)}}function y(e,t){var n=new a(void 0),r=new a(void 0);return e.addHandler("localeSettingsChanged",function(e){n.dispatch(e)}),e.addHandler("showDisabledFieldsChanged",function(e){r.dispatch(e)}),{editorInterface:t,onLocaleSettingsChanged:function(e){return n.attach(e)},onShowDisabledFieldsChanged:function(e){return r.attach(e)}}}function _(e,t){var n=new o;return e.addHandler("navigateSlideIn",function(e){n.dispatch(e)}),{openEntry:function(t,n){return e.call("navigateToContentEntity",r(r({},n),{entityType:"Entry",id:t}))},openNewEntry:function(t,n){return e.call("navigateToContentEntity",r(r({},n),{entityType:"Entry",id:null,contentTypeId:t}))},openBulkEditor:function(t,n){return e.call("navigateToBulkEditor",r({entryId:t},n))},openAsset:function(t,n){return e.call("navigateToContentEntity",r(r({},n),{entityType:"Asset",id:t}))},openNewAsset:function(t){return e.call("navigateToContentEntity",r(r({},t),{entityType:"Asset",id:null}))},openPageExtension:function(n){return e.call("navigateToPage",r({type:"extension",id:t.extension},n))},openCurrentAppPage:function(n){return e.call("navigateToPage",r({type:"app",id:t.app},n))},openAppConfig:function(){return e.call("navigateToAppConfig")},openEntriesList:function(){return e.call("navigateToSpaceEnvRoute",{route:"entries"})},openAssetsList:function(){return e.call("navigateToSpaceEnvRoute",{route:"assets"})},onSlideInNavigation:function(e){return n.attach(e)}}}var E="preInstall",m="postInstall",A=function(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)},C=function(e){return"function"==typeof e},T=function(e){return console.error(e),Promise.resolve(!1)},w=function(e,t,n){if(!C(e))return Promise.resolve(t);var r;try{r=void 0===n?e():e(n)}catch(e){return T(e)}var o,i=r;return A(o=i)&&C(o.then)||(i=Promise.resolve(i)),i.then(function(e){return e instanceof Error?Promise.reject(e):!1!==e&&(A(e)?e:t)},T).catch(T)};function I(e){var t,n=((t={}).preInstall=null,t.postInstall=null,t),r=function(e,t){if(!C(t))throw new Error("Handler must be a function.");n[e]=t};return e.addHandler("appHook",function(t){var r=t.stage,o=t.installationRequestId,i=t.err;return r===E?w(n[r],{}).then(function(t){return e.send("appHookResult",{stage:r,installationRequestId:o,result:t})}):r===m?w(n[r],void 0,i||null).then(function(){return e.send("appHookResult",{stage:r,installationRequestId:o})}):Promise.resolve()}),{setReady:function(){return e.call("callAppMethod","setReady")},isInstalled:function(){return e.call("callAppMethod","isInstalled")},getParameters:function(){return e.call("callAppMethod","getParameters")},getCurrentState:function(){return e.call("callAppMethod","getCurrentState")},onConfigure:function(e){r(E,e)},onConfigurationCompleted:function(e){r(m,e)}}}var b,L={LOCATION_ENTRY_FIELD:"entry-field",LOCATION_ENTRY_FIELD_SIDEBAR:"entry-field-sidebar",LOCATION_ENTRY_SIDEBAR:"entry-sidebar",LOCATION_DIALOG:"dialog",LOCATION_ENTRY_EDITOR:"entry-editor",LOCATION_PAGE:"page",LOCATION_APP_CONFIG:"app-config"},O=[D,P,function(e,t){var n=t.field;if(!n)throw new Error('FieldAPI called for location without "field" property defined.');return{field:new l(e,n)}},N,H],S=((b={})[L.LOCATION_ENTRY_FIELD]=O,b[L.LOCATION_ENTRY_FIELD_SIDEBAR]=O,b[L.LOCATION_ENTRY_SIDEBAR]=[D,P,N,H],b[L.LOCATION_ENTRY_EDITOR]=[D,P,N],b[L.LOCATION_DIALOG]=[D,function(e){return{close:function(t){return e.send("closeDialog",t)}}},H],b[L.LOCATION_PAGE]=[D],b[L.LOCATION_APP_CONFIG]=[D,function(e){return{app:I(e)}}],b);function D(e,t){var n=t.user,r=t.parameters,o=t.locales,i=t.ids,a=t.initialContentTypes,s=t.location||L.LOCATION_ENTRY_FIELD;return{location:{is:function(e){return s===e}},user:n,parameters:r,locales:{available:o.available,default:o.default,names:o.names,fallbacks:o.fallbacks,optional:o.optional,direction:o.direction},space:h(e,a),dialogs:v(e,i),navigator:_(e,i),notifier:{success:function(t){return e.send("notify",{type:"success",message:t})},error:function(t){return e.send("notify",{type:"error",message:t})}},ids:i,access:{can:function(t,n,r){return e.call("checkAccess",t,n,r)},canEditAppConfig:function(){return e.call("checkAppConfigAccess")}}}}function H(e,t,n){return{window:c(n,e)}}function N(e,t){return{editor:y(e,t.editorInterface)}}function P(e,t){var n=t.locales,r=t.contentType,o=t.entry,i=t.fieldInfo;return{contentType:r,entry:p(e,o,i,function(t){return new u(e,t,n.default)})}}var R,x,k,F,M=(R=window,x=function(e,t,n){return(S[t.location]||O).reduce(function(o,i){return r(r({},o),i(e,t,n))},{})},(k={promise:null,resolve:null}).promise=new Promise(function(e){k.resolve=e}),(F=k).promise.then(function(e){var t=e[0],n=R.document;n.addEventListener("focus",function(){return t.send("setActive",!0)},!0),n.addEventListener("blur",function(){return t.send("setActive",!1)},!0)}),function(e,t){!function(e,t){e.addEventListener("message",function n(r){var o=r.data;"connect"===o.method&&(e.removeEventListener("message",n),t.apply(void 0,o.params))})}(e,function(t,n){!function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];F.resolve(e)}(new s(t.id,e),t,n)})}(R),function(e,t){var n=void 0===t?{supressIframeWarning:!1}:t,r=n.makeCustomApi;n.supressIframeWarning||R.self!==R.top||console.error("Cannot use ui-extension-sdk outside of Contenful:\n\nIn order for the ui-extension-sdk to function correctly, your app needs to be run in an iframe in the Contentful Web App.\n\nLearn more about local development with the ui-extension-sdk here:\n  https://www.contentful.com/developers/docs/extensibility/ui-extensions/faq/#how-can-i-use-the-ui-extension-sdk-locally"),F.promise.then(function(t){var n,o=t[0],i=t[1],a=t[2],s=x(o,i,R);"function"==typeof r&&(n=r(o,i)),a.forEach(function(e){o._handleMessage(e)}),e(s,n)})});e.init=M,e.locations=L,Object.defineProperty(e,"__esModule",{value:!0})}),window.contentfulApp=window.contentfulExtension;
},{}],"UnXq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMockExtension=exports.clamp=exports.getInitialColumnColorData=exports.getInitialTableData=exports.useContentfulApi=exports.Intent=exports.DialogsAPI=void 0;const e=require("contentful-ui-extensions-sdk");var t;Object.defineProperty(exports,"DialogsAPI",{enumerable:!0,get:function(){return e.DialogsAPI}}),function(e){e.PRIMARY="primary",e.POSITIVE="positive",e.NEGATIVE="negative"}(t=exports.Intent||(exports.Intent={}));const r=()=>{},o=()=>{try{return window.self!==window.top}catch(e){return!0}},n=()=>o();exports.useContentfulApi=n;const s=({rows:e,columns:t})=>Array.from(new Array(e),()=>new Array(t));exports.getInitialTableData=s;const a=({columns:e})=>new Array(e);exports.getInitialColumnColorData=a;const i=(e,t,r)=>Math.min(Math.max(e,t),r);exports.clamp=i;class l{constructor(){this.storageKeyName="mockContentfulData"}serialize(e){return JSON.stringify(e)}deserialize(e){return JSON.parse(e)}setValue(e){localStorage.setItem(this.storageKeyName,this.serialize(e)),this.onValueChanged()}getValue(){return this.deserialize(localStorage.getItem(this.storageKeyName))}onValueChanged(){return this.getValue}}const u=()=>({field:new l,window:{updateHeight:r,startAutoResizer:r}});exports.createMockExtension=u;
},{"contentful-ui-extensions-sdk":"craX"}],"jltr":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,n,o,t){return new(o||(o=Promise))(function(c,r){function i(e){try{s(t.next(e))}catch(n){r(n)}}function u(e){try{s(t.throw(e))}catch(n){r(n)}}function s(e){var n;e.done?c(e.value):(n=e.value,n instanceof o?n:new o(function(e){e(n)})).then(i,u)}s((t=t.apply(e,n||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.minRows=exports.minColumns=void 0;const n=require("./utils");exports.minColumns=2,exports.minRows=2;const o=5,t=30,c=document.getElementById("columns-count"),r=document.getElementById("rows-count"),i=document.getElementById("use-column-header"),u=document.getElementById("use-row-header"),s=document.getElementById("add-column"),l=document.getElementById("remove-column"),m=document.getElementById("add-row"),d=document.getElementById("remove-row");c.min=exports.minColumns.toString(),c.max=5..toString(),r.min=exports.minRows.toString(),r.max=30..toString();const a=o=>{c.value=o.columns.toString(),r.value=o.rows.toString(),i.checked=o.useColumnHeader,u.checked=o.useRowHeader,i.onchange=function(e){const n=e.currentTarget.checked;void 0!==n&&o.setUseColumnHeader(n)},u.onchange=function(e){const n=e.currentTarget.checked;void 0!==n&&o.setUseRowHeader(n)},c.onchange=function(t){return e(this,void 0,void 0,function*(){const e=o.columns,r=(0,n.clamp)(parseInt(t.currentTarget.value,10),exports.minColumns,5);let i=!0;if(e<r){const n=r-e;for(let e=0;e<n;e++)o.addColumn()}else if(e>r){const n=e-r;for(let e=0;e<n;e++)i=yield o.removeColumn()}c.value=i?r.toString():e.toString()})},r.onchange=function(t){return e(this,void 0,void 0,function*(){const e=o.rows,c=(0,n.clamp)(parseInt(t.target.value,10),exports.minRows,30);let i=!0;if(e<c){const n=c-e;for(let e=0;e<n;e++)o.addRow()}else if(e>c){const n=e-c;for(let e=0;e<n;e++)i=yield o.removeRow()}r.value=i?c.toString():e.toString()})},s.onclick=function(e){const t=o.columns,r=(0,n.clamp)(t+1,exports.minColumns,5);o.addColumn(),c.value=r.toString()},l.onclick=function(t){return e(this,void 0,void 0,function*(){const e=o.columns,t=(0,n.clamp)(e-1,exports.minColumns,5);(yield o.removeColumn())&&(c.value=t.toString())})},m.onclick=function(e){const t=o.rows,c=(0,n.clamp)(t+1,exports.minRows,30);o.addRow(),r.value=c.toString()},d.onclick=function(t){return e(this,void 0,void 0,function*(){const e=o.rows,t=(0,n.clamp)(e-1,exports.minRows,30);(yield o.removeRow())&&(r.value=t.toString())})}};exports.default=a;
},{"./utils":"UnXq"}],"pP7K":[function(require,module,exports) {
"use strict";var t=this&&this.__awaiter||function(t,e,s,a){return new(s||(s=Promise))(function(l,o){function r(t){try{i(a.next(t))}catch(e){o(e)}}function n(t){try{i(a.throw(t))}catch(e){o(e)}}function i(t){var e;t.done?l(t.value):(e=t.value,e instanceof s?e:new s(function(t){t(e)})).then(r,n)}i((a=a.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./utils"),s=require("./event-handlers");class a{constructor({table:a,state:l,db:o,dialogs:r}){this.save=(()=>{this.db.setValue(this.state)}),this.valueChangeHandler=(t=>{this.state=Object.assign({},this.state,t)}),this.setUseColumnHeader=(t=>{this.state.useColumnHeader=t,this.save(),this.handleColumnHeaderStyle()}),this.handleColumnHeaderStyle=(()=>{const t=Array.from(this.table.rows[0].cells);this.state.useRowHeader&&t.shift(),this.state.useColumnHeader?t.forEach(t=>{this.changeTag(t,"th")}):t.forEach(t=>{this.changeTag(t,"td")})}),this.setUseRowHeader=(t=>{this.state.useRowHeader=t,this.save(),this.handleRowHeaderStyle()}),this.handleRowHeaderStyle=(()=>{const t=Array.from(this.table.rows);this.state.useRowHeader?t.forEach(t=>{const e=t.cells[0];this.changeTag(e,"th")}):t.forEach((t,e)=>{if(this.state.useColumnHeader&&0===e)return;const s=t.cells[0];this.changeTag(s,"td")})}),this.handleColorSelect=(()=>{Array.from(this.table.rows[0].cells).forEach((t,e)=>{if(0===e)return;let s=t.querySelector("select");if(!s){s=document.createElement("select");const a=["No border colour","Black","Gold","Silver","Bronze","Light Lilac","Light Blue"],l=["","#000000","#FFD245","#D8D8D8","#FFB886","#BFBFFD","#80D0E5"];for(let t=0;t<a.length;t++){const e=document.createElement("option");e.value=l[t],e.text=a[t],e.style.color=""===l[t]?"transparent":l[t],s.appendChild(e)}if(this.state.columnColors&&this.state.columnColors[e]){const t=this.state.columnColors[e];s.value=t||"-"}this.state.columnColors||(this.state.columnColors=[]),this.state.columnColors.length<=e&&(this.state.columnColors[e]=""),s.onchange=(()=>{this.state.columnColors[e]=s.value,this.save()}),t.appendChild(s)}})}),this.changeTag=((t,e)=>{const s=document.createElement(e);for(;t.firstChild;)s.appendChild(t.firstChild);for(let a=t.attributes.length-1;a>=0;--a)s.attributes.setNamedItem(t.attributes[a].cloneNode());t.parentNode.replaceChild(s,t)}),this.confirmDelete=(s=>t(this,void 0,void 0,function*(){return this.dialogs?this.dialogs.openConfirm({title:"Really delete?",message:s,intent:e.Intent.NEGATIVE}):window.confirm(s)})),this.autoGrow=(t=>{t.style.height="auto";const e=t.scrollHeight;t.style.height=`${e}px`;const s=t.dataset.row,a=document.querySelectorAll(`[data-row="${s}"]`);let l=e;a.forEach(t=>{const e=t.style.height;t.style.height="auto";const s=t.scrollHeight;s>l&&(l=s),t.style.height=e}),a.forEach(t=>{t.style.height=`${l}px`})}),this.addCell=((t,e,s)=>{const a=t.insertCell(),l=document.createElement("textarea");l.oninput=(()=>{this.autoGrow(l),this.state.tableData[e][s]=l.value||void 0,this.save()}),l.dataset.row=e.toString(),l.dataset.column=s.toString();const{tableData:o}=this.state,r=o&&o[e]&&o[e][s];l.value=r||"",a.appendChild(l),this.autoGrow(l)}),this.addRow=(()=>{const t=this.table.rows[this.table.rows.length-1];let e;if(t){const s=t.querySelector("textarea");e=parseInt(s.dataset.row,10)+1}else e=0;const s=this.table.insertRow(),a=this.state.tableData[0].length;for(let o=0;o<a;o++){const t=o;this.addCell(s,e,t)}const l=new Array(a);this.state.tableData[e]||(this.state.tableData.push(l),this.save()),this.handleRowHeaderStyle()}),this.removeRow=(()=>t(this,void 0,void 0,function*(){if(this.table.rows.length<=s.minRows)return;const t=this.table.rows.length-1;let e=!1,a="";const l=this.table.rows[t].cells;Array.from(l).forEach(t=>{const s=t.querySelector("textarea");s.value&&(e=!0,a+=`\n\n${s.value}`)});const o=!e||(yield this.confirmDelete(`Are you sure you want to delete row ${t+1}?${a}`));return o&&(this.table.deleteRow(t),this.state.tableData.splice(t,1),this.save()),o})),this.addColumn=(()=>{const t=this.table.rows[0].cells[this.table.rows[0].cells.length-1].querySelector("textarea"),e=parseInt(t.dataset.column,10)+1;Array.from(this.table.rows).forEach((t,s)=>{const a=t.cells[0].querySelector("textarea"),l=parseInt(a.dataset.row,10);this.addCell(t,l,e),this.state.tableData[s].push(void 0),this.save()}),this.handleColorSelect(),this.handleColumnHeaderStyle()}),this.removeColumn=(()=>t(this,void 0,void 0,function*(){if(this.table.rows[0].cells.length<=s.minColumns)return;const t=this.table.rows[0].cells[this.table.rows[0].cells.length-1].querySelector("textarea"),e=parseInt(t.dataset.column,10)+1;let a=!1,l="";Array.from(this.table.rows).forEach(t=>{const e=t.cells[t.cells.length-1].querySelector("textarea");e.value&&(a=!0,l+=`\n\n${e.value}`)});const o=!a||(yield this.confirmDelete(`Are you sure you want to delete column ${e}?${l}`));return o&&Array.from(this.table.rows).forEach((t,e)=>{const s=t.cells.length-1;t.deleteCell(s),this.state.tableData[e].splice(s,1),this.save()}),o})),this.table=a,this.state=l,this.db=o,this.dialogs=r;for(let t=0;t<this.state.tableData.length;t++)this.addRow();this.handleColorSelect(),this.handleColumnHeaderStyle(),this.handleRowHeaderStyle(),this.detachValueChangeHandler=this.db.onValueChanged(this.valueChangeHandler)}get currentState(){return this.state}get columns(){return this.state.tableData[0].length}get rows(){return this.state.tableData.length}get useColumnHeader(){return this.state.useColumnHeader}get useRowHeader(){return this.state.useRowHeader}}exports.default=a;
},{"./utils":"UnXq","./event-handlers":"jltr"}],"QCba":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(n){if(n&&n.__esModule)return n;var r={};if(null!=n)for(var i in n)"default"!==i&&Object.prototype.hasOwnProperty.call(n,i)&&e(r,n,i);return t(r,n),r},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const i=require("contentful-ui-extensions-sdk"),o=r(require("./table-controller")),a=n(require("./event-handlers")),l=require("./utils"),u=document.getElementById("table-extension-content"),s=u.querySelector("table"),c=e=>{let t=e.field.getValue();t&&t.tableData&&!Array.isArray(t.tableData)&&!Array.isArray(t.tableData[0])&&(t=void 0),t||(t={useColumnHeader:!0,useRowHeader:!1,tableData:(0,l.getInitialTableData)({columns:a.minColumns,rows:a.minRows}),columnColors:(0,l.getInitialColumnColorData)({columns:a.minColumns})});const n=new o.default({table:s,state:t,db:e.field,dialogs:e.dialogs});(0,a.default)(n),e.window.updateHeight(),e.window.startAutoResizer()};if((0,l.useContentfulApi)())try{(0,i.init)(c)}catch(d){console.error(d),u.innerHTML="\n      <div>\n        <h1>\n          Error\n        </h1>\n        <p>\n          We encountered an error with the Table Contentful UI Extension.\n        </p>\n      </div>\n    "}else{c((0,l.createMockExtension)())}
},{"contentful-ui-extensions-sdk":"craX","./table-controller":"pP7K","./event-handlers":"jltr","./utils":"UnXq"}]},{},["QCba"], null)
//# sourceMappingURL=src.0c8de57f.js.map